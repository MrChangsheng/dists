"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[476],{6476:function(e,a,l){l.r(a),l.d(a,{default:function(){return D}});var o=l(3396);const r=(0,o.Uk)("首页"),m=(0,o.Uk)("账号列表"),t={class:"page_content"},u={class:"flex"},s={class:"input_box"},i=(0,o.Uk)("新建用户"),d=(0,o.Uk)("编辑"),n=(0,o.Uk)("删除"),p={class:"flex"},c=(0,o.Uk)("取消"),f=(0,o.Uk)("确定"),g={class:"flex"},b=(0,o.Uk)("取消"),w=(0,o.Uk)("确定");function h(e,a,l,h,_,V){const W=(0,o.up)("el-breadcrumb-item"),k=(0,o.up)("el-breadcrumb"),C=(0,o.up)("Search"),D=(0,o.up)("el-icon"),U=(0,o.up)("el-button"),F=(0,o.up)("el-input"),z=(0,o.up)("el-table-column"),y=(0,o.up)("el-switch"),v=(0,o.up)("el-table"),P=(0,o.up)("el-pagination"),q=(0,o.up)("el-form-item"),A=(0,o.up)("el-form"),E=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(k,{"separator-icon":e.ArrowRight},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{to:{path:"/index"}},{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[m])),_:1})])),_:1},8,["separator-icon"]),(0,o._)("div",t,[(0,o._)("div",u,[(0,o._)("div",s,[(0,o.Wm)(F,{modelValue:e.searchParams.query,"onUpdate:modelValue":a[0]||(a[0]=a=>e.searchParams.query=a),placeholder:"搜索关键字",class:"input-with-select"},{append:(0,o.w5)((()=>[(0,o.Wm)(U,{onClick:h.searchList},{default:(0,o.w5)((()=>[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])]),(0,o.Wm)(U,{type:"primary",onClick:h.addUser},{default:(0,o.w5)((()=>[i])),_:1},8,["onClick"])]),(0,o.Wm)(v,{data:e.userList,style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{prop:"username",label:"姓名",width:"180"}),(0,o.Wm)(z,{prop:"email",label:"邮箱",width:"180"}),(0,o.Wm)(z,{prop:"mobile",label:"电话"}),(0,o.Wm)(z,{prop:"role_name",label:"角色"}),(0,o.Wm)(z,{prop:"mg_state",label:"状态"},{default:(0,o.w5)((e=>[(0,o.Wm)(y,{modelValue:e.row.mg_state,"onUpdate:modelValue":a=>e.row.mg_state=a,onChange:a=>h.switchChange(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,o.Wm)(z,{label:"操作"},{default:(0,o.w5)((e=>[(0,o.Wm)(U,{type:"primary",onClick:a=>h.editRow(e.row)},{default:(0,o.w5)((()=>[d])),_:2},1032,["onClick"]),(0,o.Wm)(U,{type:"danger",onClick:a=>h.deleteRow(e.row)},{default:(0,o.w5)((()=>[n])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(P,{currentPage:e.searchParams.pagenum,"onUpdate:currentPage":a[1]||(a[1]=a=>e.searchParams.pagenum=a),"page-size":e.searchParams.pagesize,"onUpdate:page-size":a[2]||(a[2]=a=>e.searchParams.pagesize=a),"page-sizes":[2,5,10,20],small:e.small,layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:h.searchList,onCurrentChange:h.searchList},null,8,["currentPage","page-size","small","total","onSizeChange","onCurrentChange"])]),(0,o.Wm)(E,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[8]||(a[8]=a=>e.dialogFormVisible=a),title:"新建用户",onClose:h.clearForm},{footer:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(U,{type:"primary",onClick:a[7]||(a[7]=e=>h.submitForm(h.userForm))},{default:(0,o.w5)((()=>[f])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(A,{model:e.formData,rules:e.rules,ref:"userForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{label:"用户名称",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData.username,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.username=a),placeholder:"请输入用户名称"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"用户密码",prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData.password,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formData.password=a),placeholder:"请输入用户密码"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"邮箱",prop:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData.email,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.email=a),placeholder:"请输入用户邮箱"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"手机号",prop:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData.mobile,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formData.mobile=a),placeholder:"请输入用户手机号"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClose"]),(0,o.Wm)(E,{modelValue:e.dialogFormEVisible,"onUpdate:modelValue":a[12]||(a[12]=a=>e.dialogFormEVisible=a),title:"编辑用户"},{footer:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[b])),_:1}),(0,o.Wm)(U,{type:"primary",onClick:a[11]||(a[11]=e=>h.submitEForm(h.userForm2))},{default:(0,o.w5)((()=>[w])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(A,{model:e.formData2,rules:e.rules2,ref:"userForm2"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{label:"邮箱",prop:"email"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData2.email,"onUpdate:modelValue":a[9]||(a[9]=a=>e.formData2.email=a),placeholder:"请输入用户邮箱"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(q,{label:"手机号",prop:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{modelValue:e.formData2.mobile,"onUpdate:modelValue":a[10]||(a[10]=a=>e.formData2.mobile=a),placeholder:"请输入用户手机号"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}var _=l(4870),V=l(9818),W={name:"roles",setup(){const e=(0,_.qj)({keyWord:"",searchParams:{query:"",pagesize:3,pagenum:1},total:0,userList:[],dialogFormVisible:!1,dialogFormEVisible:!1,formData:{username:"",password:"",email:"",mobile:""},formData2:{id:"",email:"",mobile:""},rules2:{email:[{required:!1,pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确邮箱",trigger:"blur"}],mobile:[{required:!1,pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确手机号",trigger:"blur"}]},rules:{username:[{required:!0,message:"此项为必填项",trigger:"blur"}],password:[{required:!0,message:"此项为必填项",trigger:"blur"}],email:[{required:!1,pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确邮箱",trigger:"blur"}],mobile:[{required:!1,pattern:/^[1][3,4,5,7,8][0-9]{9}$/,message:"请填写正确手机号",trigger:"blur"}]}}),a=()=>{(0,V.dg)(e.searchParams).then((a=>{a.data&&(console.log("用户数据",a),e.userList=a.data.users,e.total=a.data.total)}))},l=()=>{e.dialogFormVisible=!0},o=l=>{l.validate((l=>{l&&(0,V.nz)(e.formData).then((l=>{l.data&&(e.dialogFormVisible=!1,e.formData={username:"",password:"",email:"",mobile:""},a())}))}))},r=l=>{l.validate((l=>{l&&(0,V.hS)(e.formData2).then((l=>{l.data&&(e.dialogFormEVisible=!1,a())}))}))},m=e=>{(0,V.pB)(e).then((e=>{e.data&&a()}))},t=a=>{console.log("编辑的那条数据",a);const{email:l,mobile:o,id:r}=a;e.dialogFormEVisible=!0,e.formData2.email=l,e.formData2.mobile=o,e.formData2.id=r},u=e=>{console.log("编辑的那条数据",e),(0,V.rj)(e).then((e=>{a()}))},s=()=>{e.formData={username:"",password:"",email:"",mobile:""}};a();const i=(0,_.iH)(),d=(0,_.iH)();return{...(0,_.BK)(e),searchList:a,addUser:l,userForm:i,userForm2:d,submitForm:o,submitEForm:r,switchChange:m,editRow:t,deleteRow:u,clearForm:s}}},k=l(89);const C=(0,k.Z)(W,[["render",h],["__scopeId","data-v-5f174a7f"]]);var D=C}}]);
//# sourceMappingURL=476.16d6351e.js.map